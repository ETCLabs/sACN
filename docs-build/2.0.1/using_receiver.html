<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sACN: Using the sACN Receiver API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="etcdevtool.css" rel="stylesheet" type="text/css"/>
<!-- BEGIN CUSTOM SCRIPTS -->
<!-- BEGIN ETCDEVTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () {
    $.get('/sACNDocs/versions.txt', function (data) {
      if (data) {
        var lines = data.split('\n');
        if (lines.length > 0) {
          var version_select = $("#version_select").empty();
          lines.forEach(function (line) {
            line = line.trim();
            if (!line) {
              return;
            }
            line = line.split(':');
            var option_name = line[0].replace(/^v/, '');
            if (line.length > 1) {
              option_name += ' (' + line[1] + ')';
            }
            var option_val = '/sACNDocs/' + line[0];
            var option = $('<option></option>').attr("value", option_val)
              .text(option_name);
            if (window.location.pathname.match(line[0])) {
              option = option.attr("selected", "selected");
            }
            version_select.append(option);
          });
        }
      }
    }, 'text');
  });
</script>
<!-- END ETCDEVTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () { selectAllC() });
</script>
<script type="text/javascript">
  function selectAllC() {
    // Enable all C-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_c")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_c")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectAllCpp() {
    // Enable all C++-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_cpp")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C++-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_cpp")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectLanguage(evt, block_id, language) {
    // Get all elements with class="tabcontent" and hide them
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.startsWith("div_" + block_id)) {
        tabcontent[i].style.display = "none";
      }
    }
    // Get all elements with class="tablinks" and remove the class "active"
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.startsWith("button_" + block_id)) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById("div_" + block_id + "_" + language).style.display = "block";
    if (!evt.currentTarget.className.includes("active")) {
      evt.currentTarget.className += " active";
    }
  }
</script>
<!-- END CUSTOM SCRIPTS -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sACN
   &#160;<span id="projectnumber">2.0.1</span>
   </div>
   <div id="projectbrief">Implementation of ANSI E1.31 (Streaming ACN)</div>
  </td>
  <!-- BEGIN VERSION SELECTOR INSERTED BY ETCDEVTOOL -->
  <td style="text-align: right; padding-right: 0.5em">
    <div id="otherversions">
      View other versions:
      <select id="version_select" onchange="location = this.value">
      </select>
    </div>
  </td>
  <!-- END VERSION SELECTOR INSERTED BY ETCDEVTOOL -->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('using_receiver.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using the sACN Receiver API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__tmp_tmp_4a4nyzl_docs_pages_using_receiver"></a> The sACN Receiver API provides a method for applications to receive and process sACN data on one or more universes. This API exposes both a C and C++ language interface. The C++ interface is a header-only wrapper around the C interface.</p>
<p> 
<div class="code-tab-page-selector">
  <button id="button_1_c" class="code-tab-links" onclick="selectAllC()">Show All C Snippets</button>
  <button id="button_1_cpp" class="code-tab-links" onclick="selectAllCpp()">Show All C++ Snippets</button>
</div>
</p>
<h1>Initialization and Destruction</h1>
<p>The sACN library must be globally initialized before using the Receiver API. See <a class="el" href="global_init_and_destroy.html">Global Initialization and Destruction</a>.</p>
<p>An sACN receiver instance can listen on one universe at a time, but the universe it listens on can be changed at any time. A receiver begins listening when it is created. To create an sACN receiver instance, use the <code><a class="el" href="group__sacn__receiver.html#gacc6321deb0647ac0175993be6083683b" title="Create a new sACN receiver to listen for sACN data on a universe.">sacn_receiver_create()</a></code> function in C, or instantiate an <a class="el" href="classsacn_1_1_receiver.html" title="An instance of sACN Receiver functionality; see Using the sACN Receiver API.">sacn::Receiver</a> and call its <code>Startup()</code> function in C++. A receiver can later be destroyed by calling <code><a class="el" href="group__sacn__receiver.html#ga43f99a2447364832c9ab135ac3d8b6ae" title="Destroy a sACN receiver instance.">sacn_receiver_destroy()</a></code> in C or <code>Shutdown()</code> in C++.</p>
<p>The sACN Receiver API is an asynchronous, callback-oriented API. Part of the initial configuration for a receiver instance is to specify the callbacks for the library to use. In C, these are specified as a set of function pointers. In C++, these are specified as an instance of a class that implements <a class="el" href="classsacn_1_1_receiver_1_1_notify_handler.html" title="A base class for a class that receives notification callbacks from a sACN receiver.">sacn::Receiver::NotifyHandler</a>. Callbacks are dispatched from a background thread which is started when the first receiver instance is created.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_2_c" class="code-tab-links" onclick="selectLanguage(event, '2', 'c')">C</button>
  <button id="button_2_cpp" class="code-tab-links" onclick="selectLanguage(event, '2', 'cpp')">C++</button>
</div>
<div id="div_2_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="code" href="struct_sacn_receiver_config.html">SacnReceiverConfig</a> config = <a class="code" href="group__sacn__receiver.html#gaaaa17f5e77d094f9348c0efd361cee52">SACN_RECEIVER_CONFIG_DEFAULT_INIT</a>;</div>
<div class="line"><span class="comment">// Or, to initialize default values at runtime:</span></div>
<div class="line"><a class="code" href="group__sacn__receiver.html#ga82f2e3740ce865b7aa3e018aa8a229d9">sacn_receiver_config_init</a>(&amp;config);</div>
<div class="line"> </div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a7e0de4d0f4e4bbd14771257febdf7248">universe_id</a> = 1; <span class="comment">// Listen on universe 1</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set the callback functions - defined elsewhere</span></div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#a98b4132d20211455c32c7d1d73b1e156">universe_data</a> = my_universe_data_callback;</div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#a4aa47bcca0d30a2c28463942cac94be5">sources_lost</a> = my_sources_lost_callback;</div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#a3c827e69c782db7012f8d20f9a25bf53">sampling_period_ended</a> = my_sampling_period_ended_callback;</div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#a401d2be24423a263467e2b7b09f68b0b">sampling_period_started</a> = my_sampling_period_started_callback; <span class="comment">// optional, can be NULL</span></div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#ae587c65553885a5286a270d7bca267dc">source_pap_lost</a> = my_source_pap_lost_callback; <span class="comment">// optional, can be NULL</span></div>
<div class="line">config.<a class="code" href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">callbacks</a>.<a class="code" href="struct_sacn_receiver_callbacks.html#addfb88eea24f335ebbfc61590a5dffd3">source_limit_exceeded</a> = my_source_limit_exceeded_callback; <span class="comment">// optional, can be NULL</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="struct_sacn_mcast_interface.html">SacnMcastInterface</a> my_netints[NUM_MY_NETINTS];</div>
<div class="line"><span class="comment">// Assuming my_netints and NUM_MY_NETINTS are initialized by the application...</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="struct_sacn_netint_config.html">SacnNetintConfig</a> netint_config;</div>
<div class="line">netint_config.<a class="code" href="struct_sacn_netint_config.html#add0da5313d4b1d06a67bda5508b848e1">netints</a> = my_netints;</div>
<div class="line">netint_config.<a class="code" href="struct_sacn_netint_config.html#a6ddc029bb8aba3ead075508554592445">num_netints</a> = NUM_MY_NETINTS;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> my_receiver_handle;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If you want to specify specific network interfaces to use:</span></div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gacc6321deb0647ac0175993be6083683b">sacn_receiver_create</a>(&amp;config, &amp;my_receiver_handle, &amp;netint_config);</div>
<div class="line"><span class="comment">// Or, if you just want to use all network interfaces:</span></div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gacc6321deb0647ac0175993be6083683b">sacn_receiver_create</a>(&amp;config, &amp;my_receiver_handle, NULL);</div>
<div class="line"><span class="comment">// You can add additional receivers as well, in the same way.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// To destroy the receiver when you&#39;re done with it:</span></div>
<div class="line"><a class="code" href="group__sacn__receiver.html#ga43f99a2447364832c9ab135ac3d8b6ae">sacn_receiver_destroy</a>(my_receiver_handle);</div>
<div class="ttc" id="agroup__sacn__receiver_html_ga43f99a2447364832c9ab135ac3d8b6ae"><div class="ttname"><a href="group__sacn__receiver.html#ga43f99a2447364832c9ab135ac3d8b6ae">sacn_receiver_destroy</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_destroy(sacn_receiver_t handle)</div><div class="ttdoc">Destroy a sACN receiver instance.</div><div class="ttdef"><b>Definition:</b> receiver.c:139</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_ga82f2e3740ce865b7aa3e018aa8a229d9"><div class="ttname"><a href="group__sacn__receiver.html#ga82f2e3740ce865b7aa3e018aa8a229d9">sacn_receiver_config_init</a></div><div class="ttdeci">void sacn_receiver_config_init(SacnReceiverConfig *config)</div><div class="ttdoc">Initialize an sACN Receiver Config struct to default values.</div><div class="ttdef"><b>Definition:</b> receiver.c:55</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gaaaa17f5e77d094f9348c0efd361cee52"><div class="ttname"><a href="group__sacn__receiver.html#gaaaa17f5e77d094f9348c0efd361cee52">SACN_RECEIVER_CONFIG_DEFAULT_INIT</a></div><div class="ttdeci">#define SACN_RECEIVER_CONFIG_DEFAULT_INIT</div><div class="ttdef"><b>Definition:</b> receiver.h:301</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gacc6321deb0647ac0175993be6083683b"><div class="ttname"><a href="group__sacn__receiver.html#gacc6321deb0647ac0175993be6083683b">sacn_receiver_create</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_create(const SacnReceiverConfig *config, sacn_receiver_t *handle, const SacnNetintConfig *netint_config)</div><div class="ttdoc">Create a new sACN receiver to listen for sACN data on a universe.</div><div class="ttdef"><b>Definition:</b> receiver.c:92</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gafc1e3c92911f567bed81bbd04f3f34f6"><div class="ttname"><a href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a></div><div class="ttdeci">int sacn_receiver_t</div><div class="ttdef"><b>Definition:</b> receiver.h:58</div></div>
<div class="ttc" id="astruct_sacn_mcast_interface_html"><div class="ttname"><a href="struct_sacn_mcast_interface.html">SacnMcastInterface</a></div><div class="ttdef"><b>Definition:</b> common.h:85</div></div>
<div class="ttc" id="astruct_sacn_netint_config_html"><div class="ttname"><a href="struct_sacn_netint_config.html">SacnNetintConfig</a></div><div class="ttdef"><b>Definition:</b> common.h:102</div></div>
<div class="ttc" id="astruct_sacn_netint_config_html_a6ddc029bb8aba3ead075508554592445"><div class="ttname"><a href="struct_sacn_netint_config.html#a6ddc029bb8aba3ead075508554592445">SacnNetintConfig::num_netints</a></div><div class="ttdeci">size_t num_netints</div><div class="ttdef"><b>Definition:</b> common.h:107</div></div>
<div class="ttc" id="astruct_sacn_netint_config_html_add0da5313d4b1d06a67bda5508b848e1"><div class="ttname"><a href="struct_sacn_netint_config.html#add0da5313d4b1d06a67bda5508b848e1">SacnNetintConfig::netints</a></div><div class="ttdeci">SacnMcastInterface * netints</div><div class="ttdef"><b>Definition:</b> common.h:105</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_a3c827e69c782db7012f8d20f9a25bf53"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#a3c827e69c782db7012f8d20f9a25bf53">SacnReceiverCallbacks::sampling_period_ended</a></div><div class="ttdeci">SacnSamplingPeriodEndedCallback sampling_period_ended</div><div class="ttdef"><b>Definition:</b> receiver.h:268</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_a401d2be24423a263467e2b7b09f68b0b"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#a401d2be24423a263467e2b7b09f68b0b">SacnReceiverCallbacks::sampling_period_started</a></div><div class="ttdeci">SacnSamplingPeriodStartedCallback sampling_period_started</div><div class="ttdef"><b>Definition:</b> receiver.h:267</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_a4aa47bcca0d30a2c28463942cac94be5"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#a4aa47bcca0d30a2c28463942cac94be5">SacnReceiverCallbacks::sources_lost</a></div><div class="ttdeci">SacnSourcesLostCallback sources_lost</div><div class="ttdef"><b>Definition:</b> receiver.h:266</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_a98b4132d20211455c32c7d1d73b1e156"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#a98b4132d20211455c32c7d1d73b1e156">SacnReceiverCallbacks::universe_data</a></div><div class="ttdeci">SacnUniverseDataCallback universe_data</div><div class="ttdef"><b>Definition:</b> receiver.h:265</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_addfb88eea24f335ebbfc61590a5dffd3"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#addfb88eea24f335ebbfc61590a5dffd3">SacnReceiverCallbacks::source_limit_exceeded</a></div><div class="ttdeci">SacnSourceLimitExceededCallback source_limit_exceeded</div><div class="ttdef"><b>Definition:</b> receiver.h:270</div></div>
<div class="ttc" id="astruct_sacn_receiver_callbacks_html_ae587c65553885a5286a270d7bca267dc"><div class="ttname"><a href="struct_sacn_receiver_callbacks.html#ae587c65553885a5286a270d7bca267dc">SacnReceiverCallbacks::source_pap_lost</a></div><div class="ttdeci">SacnSourcePapLostCallback source_pap_lost</div><div class="ttdef"><b>Definition:</b> receiver.h:269</div></div>
<div class="ttc" id="astruct_sacn_receiver_config_html"><div class="ttname"><a href="struct_sacn_receiver_config.html">SacnReceiverConfig</a></div><div class="ttdef"><b>Definition:</b> receiver.h:276</div></div>
<div class="ttc" id="astruct_sacn_receiver_config_html_a4beb413a7e2291bf1488fc6472af6aa4"><div class="ttname"><a href="struct_sacn_receiver_config.html#a4beb413a7e2291bf1488fc6472af6aa4">SacnReceiverConfig::callbacks</a></div><div class="ttdeci">SacnReceiverCallbacks callbacks</div><div class="ttdef"><b>Definition:</b> receiver.h:282</div></div>
<div class="ttc" id="astruct_sacn_receiver_config_html_a7e0de4d0f4e4bbd14771257febdf7248"><div class="ttname"><a href="struct_sacn_receiver_config.html#a7e0de4d0f4e4bbd14771257febdf7248">SacnReceiverConfig::universe_id</a></div><div class="ttdeci">uint16_t universe_id</div><div class="ttdef"><b>Definition:</b> receiver.h:280</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_2_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Implement the callback functions by inheriting sacn::Receiver::NotifyHandler:</span></div>
<div class="line"><span class="keyword">class </span>MyNotifyHandler : <span class="keyword">public</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html">sacn::Receiver::NotifyHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Required callbacks that must be implemented:</span></div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#a31ed01381fa689d55d77f298fdf3c2c3">HandleUniverseData</a>(Handle receiver_handle, <span class="keyword">const</span> <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_sock_addr.html">etcpal::SockAddr</a>&amp; source_addr,</div>
<div class="line">                          <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>&amp; source_info, <span class="keyword">const</span> <a class="code" href="struct_sacn_recv_universe_data.html">SacnRecvUniverseData</a>&amp; universe_data) <span class="keyword">override</span>;</div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#aeb67059ed834bf3d178bbdc4a931adae">HandleSourcesLost</a>(Handle handle, uint16_t universe, <span class="keyword">const</span> <a class="codeRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;SacnLostSource&gt;</a>&amp; lost_sources) <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Optional callbacks - these don&#39;t have to be a part of MyNotifyHandler:</span></div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#a9cd14450c1a43ab482bebaf5a1dcb0cc">HandleSamplingPeriodStarted</a>(Handle handle, uint16_t universe) <span class="keyword">override</span>;</div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#af02397cc6bf09294666b38883dbdf6a5">HandleSamplingPeriodEnded</a>(Handle handle, uint16_t universe) <span class="keyword">override</span>;</div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#afc6fd518860704ac4b1f58d5a24f6672">HandleSourcePapLost</a>(Handle handle, uint16_t universe, <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>&amp; source) <span class="keyword">override</span>;</div>
<div class="line">  <span class="keywordtype">void</span> <a class="code" href="classsacn_1_1_receiver_1_1_notify_handler.html#ab517496e89eb88b7ee7fa383558f725b">HandleSourceLimitExceeded</a>(Handle handle, uint16_t universe) <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now to set up a receiver:</span></div>
<div class="line"><a class="code" href="structsacn_1_1_receiver_1_1_settings.html">sacn::Receiver::Settings</a> config(1); <span class="comment">// Instantiate config &amp; listen on universe 1</span></div>
<div class="line"><a class="code" href="classsacn_1_1_receiver.html">sacn::Receiver</a> receiver; <span class="comment">// Instantiate a receiver</span></div>
<div class="line"> </div>
<div class="line">MyNotifyHandler my_notify_handler;</div>
<div class="line">receiver.<a class="code" href="classsacn_1_1_receiver.html#ab8a65d7188fcd0074fd757a450a79100">Startup</a>(config, my_notify_handler);</div>
<div class="line"><span class="comment">// Or do this if Startup is being called within the NotifyHandler-derived class:</span></div>
<div class="line">receiver.<a class="code" href="classsacn_1_1_receiver.html#ab8a65d7188fcd0074fd757a450a79100">Startup</a>(config, *<span class="keyword">this</span>);</div>
<div class="line"><span class="comment">// Or do this to specify custom interfaces for the receiver to use:</span></div>
<div class="line"><a class="codeRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;SacnMcastInterface&gt;</a> my_netints;  <span class="comment">// Assuming my_netints is initialized by the application...</span></div>
<div class="line">receiver.<a class="code" href="classsacn_1_1_receiver.html#ab8a65d7188fcd0074fd757a450a79100">Startup</a>(config, my_notify_handler, my_netints);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// To destroy the receiver when you&#39;re done with it:</span></div>
<div class="line">receiver.<a class="code" href="classsacn_1_1_receiver.html#ac5f038c2b480cf9ef5e19e3eba8dbaf9">Shutdown</a>();</div>
<div class="ttc" id="aclassetcpal_1_1_sock_addr_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_sock_addr.html">etcpal::SockAddr</a></div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html">sacn::Receiver::NotifyHandler</a></div><div class="ttdoc">A base class for a class that receives notification callbacks from a sACN receiver.</div><div class="ttdef"><b>Definition:</b> receiver.h:72</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_a31ed01381fa689d55d77f298fdf3c2c3"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#a31ed01381fa689d55d77f298fdf3c2c3">sacn::Receiver::NotifyHandler::HandleUniverseData</a></div><div class="ttdeci">virtual void HandleUniverseData(Handle receiver_handle, const etcpal::SockAddr &amp;source_addr, const SacnRemoteSource &amp;source_info, const SacnRecvUniverseData &amp;universe_data)=0</div><div class="ttdoc">Notify that new universe data within the configured footprint has been received.</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_a9cd14450c1a43ab482bebaf5a1dcb0cc"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#a9cd14450c1a43ab482bebaf5a1dcb0cc">sacn::Receiver::NotifyHandler::HandleSamplingPeriodStarted</a></div><div class="ttdeci">virtual void HandleSamplingPeriodStarted(Handle handle, uint16_t universe)</div><div class="ttdoc">Notify that a receiver's sampling period has begun.</div><div class="ttdef"><b>Definition:</b> receiver.h:118</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_ab517496e89eb88b7ee7fa383558f725b"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#ab517496e89eb88b7ee7fa383558f725b">sacn::Receiver::NotifyHandler::HandleSourceLimitExceeded</a></div><div class="ttdeci">virtual void HandleSourceLimitExceeded(Handle handle, uint16_t universe)</div><div class="ttdoc">Notify that more than the configured maximum number of sources are currently sending on the universe ...</div><div class="ttdef"><b>Definition:</b> receiver.h:154</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_aeb67059ed834bf3d178bbdc4a931adae"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#aeb67059ed834bf3d178bbdc4a931adae">sacn::Receiver::NotifyHandler::HandleSourcesLost</a></div><div class="ttdeci">virtual void HandleSourcesLost(Handle handle, uint16_t universe, const std::vector&lt; SacnLostSource &gt; &amp;lost_sources)=0</div><div class="ttdoc">Notify that one or more sources have entered a source loss state.</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_af02397cc6bf09294666b38883dbdf6a5"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#af02397cc6bf09294666b38883dbdf6a5">sacn::Receiver::NotifyHandler::HandleSamplingPeriodEnded</a></div><div class="ttdeci">virtual void HandleSamplingPeriodEnded(Handle handle, uint16_t universe)</div><div class="ttdoc">Notify that a receiver's sampling period has ended.</div><div class="ttdef"><b>Definition:</b> receiver.h:129</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_1_1_notify_handler_html_afc6fd518860704ac4b1f58d5a24f6672"><div class="ttname"><a href="classsacn_1_1_receiver_1_1_notify_handler.html#afc6fd518860704ac4b1f58d5a24f6672">sacn::Receiver::NotifyHandler::HandleSourcePapLost</a></div><div class="ttdeci">virtual void HandleSourcePapLost(Handle handle, uint16_t universe, const SacnRemoteSource &amp;source)</div><div class="ttdoc">Notify that a source has stopped transmission of per-address priority packets.</div><div class="ttdef"><b>Definition:</b> receiver.h:141</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html"><div class="ttname"><a href="classsacn_1_1_receiver.html">sacn::Receiver</a></div><div class="ttdoc">An instance of sACN Receiver functionality; see Using the sACN Receiver API.</div><div class="ttdef"><b>Definition:</b> receiver.h:62</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_ab8a65d7188fcd0074fd757a450a79100"><div class="ttname"><a href="classsacn_1_1_receiver.html#ab8a65d7188fcd0074fd757a450a79100">sacn::Receiver::Startup</a></div><div class="ttdeci">etcpal::Error Startup(const Settings &amp;settings, NotifyHandler &amp;notify_handler)</div><div class="ttdoc">Start listening for sACN data on a universe.</div><div class="ttdef"><b>Definition:</b> receiver.h:363</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_ac5f038c2b480cf9ef5e19e3eba8dbaf9"><div class="ttname"><a href="classsacn_1_1_receiver.html#ac5f038c2b480cf9ef5e19e3eba8dbaf9">sacn::Receiver::Shutdown</a></div><div class="ttdeci">void Shutdown()</div><div class="ttdoc">Stop listening for sACN data on a universe.</div><div class="ttdef"><b>Definition:</b> receiver.h:424</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html"><div class="ttname"><a href="struct_sacn_recv_universe_data.html">SacnRecvUniverseData</a></div><div class="ttdef"><b>Definition:</b> receiver.h:89</div></div>
<div class="ttc" id="astruct_sacn_remote_source_html"><div class="ttname"><a href="struct_sacn_remote_source.html">SacnRemoteSource</a></div><div class="ttdef"><b>Definition:</b> receiver.h:124</div></div>
<div class="ttc" id="astructsacn_1_1_receiver_1_1_settings_html"><div class="ttname"><a href="structsacn_1_1_receiver_1_1_settings.html">sacn::Receiver::Settings</a></div><div class="ttdoc">A set of configuration settings that a receiver needs to initialize.</div><div class="ttdef"><b>Definition:</b> receiver.h:166</div></div>
<div class="ttc" id="avector_html"><div class="ttname"><a href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a></div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Listening on a Universe</h1>
<p>A receiver can listen to one universe at a time. The initial universe being listened to is specified in the config passed into create/Startup. There are functions that allow you to get the current universe being listened to, or to change the universe to listen to.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_3_c" class="code-tab-links" onclick="selectLanguage(event, '3', 'c')">C</button>
  <button id="button_3_cpp" class="code-tab-links" onclick="selectLanguage(event, '3', 'cpp')">C++</button>
</div>
<div id="div_3_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get the universe currently being listened to</span></div>
<div class="line">uint16_t current_universe;</div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gae77eea445ebb380fb4d47c63c0f3ba32">sacn_receiver_get_universe</a>(my_receiver_handle, &amp;current_universe);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Change the universe to listen to</span></div>
<div class="line">uint16_t new_universe = current_universe + 1;</div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gabb5ec7d4459ac694e5fa0ae97572f388">sacn_receiver_change_universe</a>(my_receiver_handle, new_universe);</div>
<div class="ttc" id="agroup__sacn__receiver_html_gabb5ec7d4459ac694e5fa0ae97572f388"><div class="ttname"><a href="group__sacn__receiver.html#gabb5ec7d4459ac694e5fa0ae97572f388">sacn_receiver_change_universe</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_change_universe(sacn_receiver_t handle, uint16_t new_universe_id)</div><div class="ttdoc">Change the universe on which an sACN receiver is listening.</div><div class="ttdef"><b>Definition:</b> receiver.c:255</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gae77eea445ebb380fb4d47c63c0f3ba32"><div class="ttname"><a href="group__sacn__receiver.html#gae77eea445ebb380fb4d47c63c0f3ba32">sacn_receiver_get_universe</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_get_universe(sacn_receiver_t handle, uint16_t *universe_id)</div><div class="ttdoc">Get the universe on which a sACN receiver is currently listening.</div><div class="ttdef"><b>Definition:</b> receiver.c:173</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_3_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get the universe currently being listened to</span></div>
<div class="line"><span class="keyword">auto</span> result = receiver.<a class="code" href="classsacn_1_1_receiver.html#a3d205f22d3d18f81585fd8d07ea21647">GetUniverse</a>();</div>
<div class="line"><span class="keywordflow">if</span> (result)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Change the universe to listen to</span></div>
<div class="line">  uint16_t new_universe = *result + 1;</div>
<div class="line">  receiver.<a class="code" href="classsacn_1_1_receiver.html#aa94ae64c11fbb22db3e21fba1e85cc64">ChangeUniverse</a>(new_universe);</div>
<div class="line">}</div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_a3d205f22d3d18f81585fd8d07ea21647"><div class="ttname"><a href="classsacn_1_1_receiver.html#a3d205f22d3d18f81585fd8d07ea21647">sacn::Receiver::GetUniverse</a></div><div class="ttdeci">etcpal::Expected&lt; uint16_t &gt; GetUniverse() const</div><div class="ttdoc">Get the universe this receiver is listening to.</div><div class="ttdef"><b>Definition:</b> receiver.h:435</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_aa94ae64c11fbb22db3e21fba1e85cc64"><div class="ttname"><a href="classsacn_1_1_receiver.html#aa94ae64c11fbb22db3e21fba1e85cc64">sacn::Receiver::ChangeUniverse</a></div><div class="ttdeci">etcpal::Error ChangeUniverse(uint16_t new_universe_id)</div><div class="ttdoc">Change the universe this receiver is listening to.</div><div class="ttdef"><b>Definition:</b> receiver.h:479</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Footprints</h2>
<p>TODO: Custom footprints are not yet implemented, so the footprint will always be the full universe.</p>
<p>A receiver can also be configured to listen to a specific range of slots within the universe, which is called the footprint. For example, networked fixtures might use this to only retrieve data about slots within their DMX footprint. The footprint is initially specified in the receiver config, but it is optional, so it defaults to the full universe if it isn't specified in the config. There are also functions to get and change the footprint, including a function that can change both the universe and footprint at once.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_4_c" class="code-tab-links" onclick="selectLanguage(event, '4', 'c')">C</button>
  <button id="button_4_cpp" class="code-tab-links" onclick="selectLanguage(event, '4', 'cpp')">C++</button>
</div>
<div id="div_4_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get the current footprint</span></div>
<div class="line"><a class="code" href="struct_sacn_recv_universe_subrange.html">SacnRecvUniverseSubrange</a> current_footprint;</div>
<div class="line"><a class="code" href="group__sacn__receiver.html#ga3dadba0fa169d0bfe82d5884004ecaa8">sacn_receiver_get_footprint</a>(my_receiver_handle, &amp;current_footprint);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Change the footprint, but keep the universe the same</span></div>
<div class="line"><a class="code" href="struct_sacn_recv_universe_subrange.html">SacnRecvUniverseSubrange</a> new_footprint;</div>
<div class="line">new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> = 20;</div>
<div class="line">new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">address_count</a> = 10;</div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gab5be9e77fa2652f71c93d9886ae826b2">sacn_receiver_change_footprint</a>(my_receiver_handle, &amp;new_footprint);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Change both the universe and the footprint at once</span></div>
<div class="line">uint16_t new_universe = current_universe + 1;</div>
<div class="line">new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> = 40;</div>
<div class="line">new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">address_count</a> = 20;</div>
<div class="line"><a class="code" href="group__sacn__receiver.html#gaf046362e62f8f4a910a00aaee3006247">sacn_receiver_change_universe_and_footprint</a>(my_receiver_handle, new_universe, &amp;new_footprint);</div>
<div class="ttc" id="agroup__sacn__receiver_html_ga3dadba0fa169d0bfe82d5884004ecaa8"><div class="ttname"><a href="group__sacn__receiver.html#ga3dadba0fa169d0bfe82d5884004ecaa8">sacn_receiver_get_footprint</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_get_footprint(sacn_receiver_t handle, SacnRecvUniverseSubrange *footprint)</div><div class="ttdoc">Get the footprint within the universe on which a sACN receiver is currently listening.</div><div class="ttdef"><b>Definition:</b> receiver.c:216</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gab5be9e77fa2652f71c93d9886ae826b2"><div class="ttname"><a href="group__sacn__receiver.html#gab5be9e77fa2652f71c93d9886ae826b2">sacn_receiver_change_footprint</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_change_footprint(sacn_receiver_t handle, const SacnRecvUniverseSubrange *new_footprint)</div><div class="ttdoc">Change the footprint within the universe on which an sACN receiver is listening. TODO: Not yet implem...</div><div class="ttdef"><b>Definition:</b> receiver.c:291</div></div>
<div class="ttc" id="agroup__sacn__receiver_html_gaf046362e62f8f4a910a00aaee3006247"><div class="ttname"><a href="group__sacn__receiver.html#gaf046362e62f8f4a910a00aaee3006247">sacn_receiver_change_universe_and_footprint</a></div><div class="ttdeci">etcpal_error_t sacn_receiver_change_universe_and_footprint(sacn_receiver_t handle, uint16_t new_universe_id, const SacnRecvUniverseSubrange *new_footprint)</div><div class="ttdoc">Change the universe and footprint on which an sACN receiver is listening. TODO: Not yet implemented.</div><div class="ttdef"><b>Definition:</b> receiver.c:311</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_subrange_html"><div class="ttname"><a href="struct_sacn_recv_universe_subrange.html">SacnRecvUniverseSubrange</a></div><div class="ttdef"><b>Definition:</b> receiver.h:80</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_subrange_html_a827b7214573943430871533037d0f5b9"><div class="ttname"><a href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">SacnRecvUniverseSubrange::address_count</a></div><div class="ttdeci">int address_count</div><div class="ttdef"><b>Definition:</b> receiver.h:82</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_subrange_html_ace16bae043b38ea02cb084b12bcbf646"><div class="ttname"><a href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">SacnRecvUniverseSubrange::start_address</a></div><div class="ttdeci">int start_address</div><div class="ttdef"><b>Definition:</b> receiver.h:81</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_4_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get the universe currently being listened to</span></div>
<div class="line"><span class="keyword">auto</span> current_footprint = receiver.<a class="code" href="classsacn_1_1_receiver.html#aaa4d2448f1e1f8b23c095742738df97c">GetFootprint</a>();</div>
<div class="line"><span class="keywordflow">if</span> (current_footprint)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Change the footprint, but keep the universe the same</span></div>
<div class="line">  <a class="code" href="struct_sacn_recv_universe_subrange.html">SacnRecvUniverseSubrange</a> new_footprint;</div>
<div class="line">  new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> = current_footprint.start_address + 10;</div>
<div class="line">  new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">address_count</a> = current_footprint.address_count;</div>
<div class="line">  receiver.<a class="code" href="classsacn_1_1_receiver.html#a6d46635ac84bcb47ff0d01bcafe4ef91">ChangeFootprint</a>(new_footprint);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Change both the universe and the footprint at once</span></div>
<div class="line">  new_footprint.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> += 10;</div>
<div class="line">  uint16_t new_universe = 100u;</div>
<div class="line">  receiver.<a class="code" href="classsacn_1_1_receiver.html#ac097835505ac503b525bcaa566cf506d">ChangeUniverseAndFootprint</a>(new_universe, new_footprint);</div>
<div class="line">}</div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_a6d46635ac84bcb47ff0d01bcafe4ef91"><div class="ttname"><a href="classsacn_1_1_receiver.html#a6d46635ac84bcb47ff0d01bcafe4ef91">sacn::Receiver::ChangeFootprint</a></div><div class="ttdeci">etcpal::Error ChangeFootprint(const SacnRecvUniverseSubrange &amp;new_footprint)</div><div class="ttdoc">Change the footprint within the universe this receiver is listening to. TODO: Not yet implemented.</div><div class="ttdef"><b>Definition:</b> receiver.h:494</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_aaa4d2448f1e1f8b23c095742738df97c"><div class="ttname"><a href="classsacn_1_1_receiver.html#aaa4d2448f1e1f8b23c095742738df97c">sacn::Receiver::GetFootprint</a></div><div class="ttdeci">etcpal::Expected&lt; SacnRecvUniverseSubrange &gt; GetFootprint() const</div><div class="ttdoc">Get the footprint within the universe this receiver is listening to.</div><div class="ttdef"><b>Definition:</b> receiver.h:452</div></div>
<div class="ttc" id="aclasssacn_1_1_receiver_html_ac097835505ac503b525bcaa566cf506d"><div class="ttname"><a href="classsacn_1_1_receiver.html#ac097835505ac503b525bcaa566cf506d">sacn::Receiver::ChangeUniverseAndFootprint</a></div><div class="ttdeci">etcpal::Error ChangeUniverseAndFootprint(uint16_t new_universe_id, const SacnRecvUniverseSubrange &amp;new_footprint)</div><div class="ttdoc">Change the universe and footprint this receiver is listening to. TODO: Not yet implemented.</div><div class="ttdef"><b>Definition:</b> receiver.h:510</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Receiving sACN Data</h1>
<p>The universe data callback forwards incoming DMX data to the application. See the callback's documentation for more information about when it is called and when it isn't.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_5_c" class="code-tab-links" onclick="selectLanguage(event, '5', 'c')">C</button>
  <button id="button_5_cpp" class="code-tab-links" onclick="selectLanguage(event, '5', 'cpp')">C++</button>
</div>
<div id="div_5_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_universe_data_callback(<a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> receiver_handle, <span class="keyword">const</span> <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html">EtcPalSockAddr</a>* source_addr,</div>
<div class="line">                               <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>* source_info, <span class="keyword">const</span> <a class="code" href="struct_sacn_recv_universe_data.html">SacnRecvUniverseData</a>* universe_data,</div>
<div class="line">                               <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check receiver_handle and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// You wouldn&#39;t normally print a message on each sACN update, but this is just to demonstrate the</span></div>
<div class="line">  <span class="comment">// fields available:</span></div>
<div class="line">  <span class="keywordtype">char</span> addr_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__inet.html#gacd7ec0d81e171166483c7629669bf05d">ETCPAL_IP_STRING_BYTES</a>];</div>
<div class="line">  <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__inet.html#gaf98da0ae21f7960b5e046c55b8d79c4a">etcpal_ip_to_string</a>(&amp;source_addr-&gt;<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">ip</a>, addr_str);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">char</span> cid_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a>];</div>
<div class="line">  <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a>(&amp;source_info-&gt;<a class="code" href="struct_sacn_remote_source.html#a4c3f7d9a58af5033f9acd8c942bf81d9">cid</a>, cid_str);</div>
<div class="line"> </div>
<div class="line">  <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">printf</a>(<span class="stringliteral">&quot;Got sACN update from source %s (address %s:%u, name %s) on universe %u, priority %u, start code %u&quot;</span>,</div>
<div class="line">         cid_str, addr_str, source_addr-&gt;<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>, source_info-&gt;<a class="code" href="struct_sacn_remote_source.html#a7e3669a12853b82f7d2b7488bb174956">name</a>, universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a7e0de4d0f4e4bbd14771257febdf7248">universe_id</a>, universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>,</div>
<div class="line">         universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a09df16493b12c991aef309819c8eebab">start_code</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a7d039abc15e5b41fb9404c941d705648">is_sampling</a>)</div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">printf</a>(<span class="stringliteral">&quot; (during the sampling period)\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Example for an sACN-enabled fixture...</span></div>
<div class="line">  <span class="keywordflow">if</span> ((universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a09df16493b12c991aef309819c8eebab">start_code</a> == 0x00) &amp;&amp; (universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#ad634e09aa77487d44087c02a9143ee17">slot_range</a>.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> == my_start_addr) &amp;&amp;</div>
<div class="line">      (universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#ad634e09aa77487d44087c02a9143ee17">slot_range</a>.<a class="code" href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">address_count</a> == MY_DMX_FOOTPRINT))</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// values[0] will always be the level of the first slot of the footprint</span></div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/string/byte/memcpy.html">memcpy</a>(my_data_buf, universe_data-&gt;<a class="code" href="struct_sacn_recv_universe_data.html#a92142b0edf6b988306f478760c7a38aa">values</a>, MY_DMX_FOOTPRINT);</div>
<div class="line">    <span class="comment">// Act on the data somehow</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="afprintf_html"><div class="ttname"><a href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">std::printf</a></div><div class="ttdeci">T printf(T... args)</div></div>
<div class="ttc" id="agroup__etcpal__inet_html_gacd7ec0d81e171166483c7629669bf05d"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__inet.html#gacd7ec0d81e171166483c7629669bf05d">ETCPAL_IP_STRING_BYTES</a></div><div class="ttdeci">#define ETCPAL_IP_STRING_BYTES</div></div>
<div class="ttc" id="agroup__etcpal__inet_html_gaf98da0ae21f7960b5e046c55b8d79c4a"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__inet.html#gaf98da0ae21f7960b5e046c55b8d79c4a">etcpal_ip_to_string</a></div><div class="ttdeci">etcpal_error_t etcpal_ip_to_string(const EtcPalIpAddr *src, char *dest)</div></div>
<div class="ttc" id="agroup__etcpal__uuid_html_ga479b00b02ab33cf757e9476ad3286336"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a></div><div class="ttdeci">bool etcpal_uuid_to_string(const EtcPalUuid *uuid, char *buf)</div></div>
<div class="ttc" id="agroup__etcpal__uuid_html_gabab14207e273082491f7be2a21275092"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a></div><div class="ttdeci">#define ETCPAL_UUID_STRING_BYTES</div></div>
<div class="ttc" id="amemcpy_html"><div class="ttname"><a href="https://en.cppreference.com/w/cpp/string/byte/memcpy.html">std::memcpy</a></div><div class="ttdeci">T memcpy(T... args)</div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html">EtcPalSockAddr</a></div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html_a19cc8016f534a565f984438cfe911a9e"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">EtcPalSockAddr::ip</a></div><div class="ttdeci">EtcPalIpAddr ip</div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">EtcPalSockAddr::port</a></div><div class="ttdeci">uint16_t port</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_a09df16493b12c991aef309819c8eebab"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#a09df16493b12c991aef309819c8eebab">SacnRecvUniverseData::start_code</a></div><div class="ttdeci">uint8_t start_code</div><div class="ttdef"><b>Definition:</b> receiver.h:111</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_a0ad043071ccc7a261d79a759dc9c6f0c"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#a0ad043071ccc7a261d79a759dc9c6f0c">SacnRecvUniverseData::priority</a></div><div class="ttdeci">uint8_t priority</div><div class="ttdef"><b>Definition:</b> receiver.h:97</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_a7d039abc15e5b41fb9404c941d705648"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#a7d039abc15e5b41fb9404c941d705648">SacnRecvUniverseData::is_sampling</a></div><div class="ttdeci">bool is_sampling</div><div class="ttdef"><b>Definition:</b> receiver.h:107</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_a7e0de4d0f4e4bbd14771257febdf7248"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#a7e0de4d0f4e4bbd14771257febdf7248">SacnRecvUniverseData::universe_id</a></div><div class="ttdeci">uint16_t universe_id</div><div class="ttdef"><b>Definition:</b> receiver.h:93</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_a92142b0edf6b988306f478760c7a38aa"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#a92142b0edf6b988306f478760c7a38aa">SacnRecvUniverseData::values</a></div><div class="ttdeci">const uint8_t * values</div><div class="ttdef"><b>Definition:</b> receiver.h:119</div></div>
<div class="ttc" id="astruct_sacn_recv_universe_data_html_ad634e09aa77487d44087c02a9143ee17"><div class="ttname"><a href="struct_sacn_recv_universe_data.html#ad634e09aa77487d44087c02a9143ee17">SacnRecvUniverseData::slot_range</a></div><div class="ttdeci">SacnRecvUniverseSubrange slot_range</div><div class="ttdef"><b>Definition:</b> receiver.h:115</div></div>
<div class="ttc" id="astruct_sacn_remote_source_html_a4c3f7d9a58af5033f9acd8c942bf81d9"><div class="ttname"><a href="struct_sacn_remote_source.html#a4c3f7d9a58af5033f9acd8c942bf81d9">SacnRemoteSource::cid</a></div><div class="ttdeci">EtcPalUuid cid</div><div class="ttdef"><b>Definition:</b> receiver.h:128</div></div>
<div class="ttc" id="astruct_sacn_remote_source_html_a7e3669a12853b82f7d2b7488bb174956"><div class="ttname"><a href="struct_sacn_remote_source.html#a7e3669a12853b82f7d2b7488bb174956">SacnRemoteSource::name</a></div><div class="ttdeci">char name[SACN_SOURCE_NAME_MAX_LEN]</div><div class="ttdef"><b>Definition:</b> receiver.h:130</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_5_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyNotifyHandler::HandleUniverseData(Handle receiver_handle, <span class="keyword">const</span> <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_sock_addr.html">etcpal::SockAddr</a>&amp; source_addr,</div>
<div class="line">                                         <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>&amp; source_info, <span class="keyword">const</span> <a class="code" href="struct_sacn_recv_universe_data.html">SacnRecvUniverseData</a>&amp; universe_data)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// You wouldn&#39;t normally print a message on each sACN update, but this is just to demonstrate the</span></div>
<div class="line">  <span class="comment">// header fields available:</span></div>
<div class="line">  <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Got sACN update from source &quot;</span> &lt;&lt; <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html">etcpal::Uuid</a>(source_info.<a class="code" href="struct_sacn_remote_source.html#a4c3f7d9a58af5033f9acd8c942bf81d9">cid</a>).<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="stringliteral">&quot; (address &quot;</span> </div>
<div class="line">            &lt;&lt; source_addr.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_sock_addr.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="stringliteral">&quot;, name &quot;</span> &lt;&lt; source_info.<a class="code" href="struct_sacn_remote_source.html#a7e3669a12853b82f7d2b7488bb174956">name</a> &lt;&lt; <span class="stringliteral">&quot;) on universe &quot;</span></div>
<div class="line">            &lt;&lt; universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a7e0de4d0f4e4bbd14771257febdf7248">universe_id</a> &lt;&lt; <span class="stringliteral">&quot;, priority &quot;</span> &lt;&lt; universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a> &lt;&lt; <span class="stringliteral">&quot;, start code &quot;</span></div>
<div class="line">            &lt;&lt; universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a09df16493b12c991aef309819c8eebab">start_code</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a7d039abc15e5b41fb9404c941d705648">is_sampling</a>)</div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot; (during the sampling period)\n&quot;</span>;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Example for an sACN-enabled fixture...</span></div>
<div class="line">  <span class="keywordflow">if</span> ((universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a09df16493b12c991aef309819c8eebab">start_code</a> == 0x00) &amp;&amp; (universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#ad634e09aa77487d44087c02a9143ee17">slot_range</a>.<a class="code" href="struct_sacn_recv_universe_subrange.html#ace16bae043b38ea02cb084b12bcbf646">start_address</a> == my_start_addr) &amp;&amp;</div>
<div class="line">      (universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#ad634e09aa77487d44087c02a9143ee17">slot_range</a>.<a class="code" href="struct_sacn_recv_universe_subrange.html#a827b7214573943430871533037d0f5b9">address_count</a> == MY_DMX_FOOTPRINT))</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// values[0] will always be the level of the first slot of the footprint</span></div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/string/byte/memcpy.html">memcpy</a>(my_data_buf, universe_data.<a class="code" href="struct_sacn_recv_universe_data.html#a92142b0edf6b988306f478760c7a38aa">values</a>, MY_DMX_FOOTPRINT);</div>
<div class="line">    <span class="comment">// Act on the data somehow</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="abasic_ostream_html"><div class="ttname"><a href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a></div></div>
<div class="ttc" id="aclassetcpal_1_1_sock_addr_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_sock_addr.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::SockAddr::ToString</a></div><div class="ttdeci">std::string ToString() const</div></div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html">etcpal::Uuid</a></div></div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::Uuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>The Sampling period</h1>
<p>There may be multiple sources transmitting data on a universe. The sampling period is used in order to remove flicker as sources are discoverd. There are notifications for when the sampling period begins, as well as when it ends, for each universe. The Universe Data callback also provides is_sampling (in universe_data) to indicate if the data was received during the sampling period. These notifications allow the application to know when to act on the universe data with assurance that all of the current sources are represented.</p>
<p>The sampling period occurs when a new receiver is created, as well as when the universe and/or footprint are changed.</p>
<p>Here is an example of the Sampling Period Ended callback:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_6_c" class="code-tab-links" onclick="selectLanguage(event, '6', 'c')">C</button>
  <button id="button_6_cpp" class="code-tab-links" onclick="selectLanguage(event, '6', 'cpp')">C++</button>
</div>
<div id="div_6_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_sampling_period_ended_callback(<a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> handle, uint16_t universe, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handle and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Apply universe data as needed...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
<div id="div_6_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyNotifyHandler::HandleSamplingPeriodEnded(Handle handle, uint16_t universe)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Apply universe data as needed...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Tracking Sources</h1>
<p>The sACN library tracks each source that is sending DMX data on a universe. In sACN, multiple sources can send data simultaneously on the same universe. There are many ways to resolve conflicting data from different sources and determine the winner; some tools for this are given by the library and others can be implemented by the consuming application.</p>
<p>Each source has a <em>Component Identifier</em> (CID), which is a UUID that is unique to that source. Each source also has a handle that should be used as a primary key, differentiating it from other sources. Sources also have a descriptive name that can be user-assigned and is not required to be unique. This source data is provided in the <a class="el" href="struct_sacn_remote_source.html">SacnRemoteSource</a> struct in the universe data callback, as well as in the <a class="el" href="struct_sacn_lost_source.html">SacnLostSource</a> struct in the sources lost callback.</p>
<h2>Priority</h2>
<p>The sACN standard provides a universe priority value with each sACN data packet. This unsigned 8-bit value ranges from 0 to 200, where 0 is the lowest and 200 is the highest priority. The priority value for a packet is available in the universe_data parameter of the universe data callback. It is the application's responsibility to ensure that higher-priority data takes precedence over lower-priority data.</p>
<p>ETC has extended the sACN standard with a method of tracking priority on a per-address basis. This is implemented by sending an alternate START code packet on the same universe periodically - the START code is <code>0xdd</code>. When receiving a data packet with the start code <code>0xdd</code>, the values in that packet are to be interpreted as a priority value from 1 to 200 for the corresponding level in the DMX (NULL START code) packets. A value of 0 indicates "not sourced", meaning the source is not sending NULL START code data to that slot. Likewise, if less than 512 <code>0xdd</code> values are received, then the values beyond the last <code>0xdd</code> slot should also be treated as not sourced. Receivers which wish to implement the per-address priority extension should make sure that <a class="el" href="group__sacnopts__global.html#ga59ee3abb2f4eb1554d7be219a9c8028b" title="Enable ETC&#39;s per-address priority extension to sACN.">SACN_ETC_PRIORITY_EXTENSION</a> is set to 1, check for the <code>0xdd</code> start code, and handle the data accordingly.</p>
<p>When implementing the per-address priority extension, the source PAP lost callback should be implemented to handle the condition where a source that was previously sending <code>0xdd</code> packets stops sending them:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_7_c" class="code-tab-links" onclick="selectLanguage(event, '7', 'c')">C</button>
  <button id="button_7_cpp" class="code-tab-links" onclick="selectLanguage(event, '7', 'cpp')">C++</button>
</div>
<div id="div_7_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_source_pap_lost_callback(<a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> handle, uint16_t universe, <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>* source, </div>
<div class="line">                                 <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handle and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Revert to using the per-packet priority value to resolve priorities for this universe.</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
<div id="div_7_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyNotifyHandler::HandleSourcePapLost(Handle handle, uint16_t universe, <span class="keyword">const</span> <a class="code" href="struct_sacn_remote_source.html">SacnRemoteSource</a>&amp; source)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Revert to using the per-packet priority value to resolve priorities for this universe.</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
</p>
<p>If the library is compiled with <a class="el" href="group__sacnopts__global.html#ga59ee3abb2f4eb1554d7be219a9c8028b" title="Enable ETC&#39;s per-address priority extension to sACN.">SACN_ETC_PRIORITY_EXTENSION</a> set to 0, then <code>0xdd</code> packets will not be received, and the source PAP lost callback will not be called.</p>
<h2>Merging</h2>
<p>When multiple sources are sending on the same universe at the same priority, receiver implementations are responsible for designating a merge algorithm to merge the data from the sources together. The most commonly-used algorithm is Highest Takes Precedence (HTP), where the numerically highest level for each slot from any source is the one that is acted upon.</p>
<p>The sACN library provides a couple of APIs to facilitate merging. The first, the DMX merger API, provides a software merger that takes NULL start code and priority data as input and outputs the merged levels, along with source IDs and PAP for each level. For more information, see <a class="el" href="using_dmx_merger.html">Using the sACN DMX Merger API</a>. The second, the merge receiver API, combines the receiver and DMX merger APIs to offer a simplified solution for receiver functionality with merging built in. See <a class="el" href="using_merge_receiver.html">Using the sACN Merge Receiver API</a> for more information.</p>
<h1>Sources Lost Conditions</h1>
<p>When a previously-tracked source stops sending data, the sACN library implements a custom source-loss algorithm to attempt to group lost sources together. See <a class="el" href="source_loss_behavior.html">Source Loss Behavior</a> for more information on this algorithm.</p>
<p>After the source-loss algorithm runs, the library will deliver a sources lost callback to indicate that some number of sources have gone offline.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_8_c" class="code-tab-links" onclick="selectLanguage(event, '8', 'c')">C</button>
  <button id="button_8_cpp" class="code-tab-links" onclick="selectLanguage(event, '8', 'cpp')">C++</button>
</div>
<div id="div_8_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_sources_lost_callback(<a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> handle, uint16_t universe, <span class="keyword">const</span> <a class="code" href="struct_sacn_lost_source.html">SacnLostSource</a>* lost_sources, </div>
<div class="line">                              <span class="keywordtype">size_t</span> num_lost_sources, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handle and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// You might not normally print a message on this condition, but this is just to demonstrate</span></div>
<div class="line">  <span class="comment">// the fields available:</span></div>
<div class="line">  <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">printf</a>(<span class="stringliteral">&quot;The following sources have gone offline:\n&quot;</span>)</div>
<div class="line">  for (<a class="code" href="struct_sacn_lost_source.html">SacnLostSource</a>* source = lost_sources; source &lt; lost_sources + num_lost_sources; ++source)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordtype">char</span> cid_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a>];</div>
<div class="line">    <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a>(&amp;source-&gt;cid, cid_str);</div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/c/fprintf.html">printf</a>(<span class="stringliteral">&quot;CID: %s\tName: %s\tTerminated: %s\n&quot;</span>, cid_str, source-&gt;name, source-&gt;terminated ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Remove the source from your state tracking...</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="astruct_sacn_lost_source_html"><div class="ttname"><a href="struct_sacn_lost_source.html">SacnLostSource</a></div><div class="ttdef"><b>Definition:</b> receiver.h:135</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_8_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyNotifyHandler::HandleSourcesLost(Handle handle, uint16_t universe,</div>
<div class="line">                                        <span class="keyword">const</span> <a class="codeRef" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;SacnLostSource&gt;</a>&amp; lost_sources)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// You might not normally print a message on this condition, but this is just to demonstrate</span></div>
<div class="line">  <span class="comment">// the fields available:</span></div>
<div class="line">  <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;The following sources have gone offline:\n&quot;</span>;</div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code" href="struct_sacn_lost_source.html">SacnLostSource</a>&amp; src : lost_sources)</div>
<div class="line">  {</div>
<div class="line">    <a class="codeRef" href="https://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;CID: &quot;</span> &lt;&lt; <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html">etcpal::Uuid</a>(source.cid).<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/0.4.1/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="stringliteral">&quot;\tName: &quot;</span> &lt;&lt; source.name &lt;&lt; <span class="stringliteral">&quot;\tTerminated: &quot;</span> </div>
<div class="line">              &lt;&lt; source.terminated &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Remove the source from your state tracking...</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
</p>
<p>If a source that was lost comes back again, then there will once again be universe data notifications for that source.</p>
<h1>Source Limit Exceeded Conditions</h1>
<p>The sACN library will only forward data from sources that it is able to track. When the library is compilied with <a class="el" href="group__sacnopts__global.html#gaf7b1d2fa482d1665683883f80b1f4d87" title="Use dynamic memory allocation.">SACN_DYNAMIC_MEM</a> set to 0, this means that it will only track up to <a class="el" href="group__sacnopts__receiver.html#ga079b2f51919b9ac76e3b3330040bd20e" title="The maximum number of sources that can be tracked on each universe.">SACN_RECEIVER_MAX_SOURCES_PER_UNIVERSE</a> sources at a time. (You can change these compile options in your sacn_config.h; see <a class="el" href="building_and_integrating.html">Building and Integrating the sACN Library Into Your Project</a>.)</p>
<p>When the library encounters a source that it does not have room to track, it will send a single source limit exceeded notification. Additional source limit exceeded callbacks will not be delivered until the number of tracked sources falls below the limit and then exceeds it again.</p>
<p>The library will also check against the <code>source_count_max</code> value from the receiver config/settings, limiting it to <a class="el" href="group__sacnopts__receiver.html#ga079b2f51919b9ac76e3b3330040bd20e" title="The maximum number of sources that can be tracked on each universe.">SACN_RECEIVER_MAX_SOURCES_PER_UNIVERSE</a> if <a class="el" href="group__sacnopts__global.html#gaf7b1d2fa482d1665683883f80b1f4d87" title="Use dynamic memory allocation.">SACN_DYNAMIC_MEM</a> is 0. The <code>source_count_max</code> value may be set to <a class="el" href="group__sacn__receiver.html#gadb2ea19692692ca852423d0a9de749ea" title="Constant for &quot;infinite&quot; when listening or merging sACN universes.">SACN_RECEIVER_INFINITE_SOURCES</a>, which is the default. In this case, if <a class="el" href="group__sacnopts__global.html#gaf7b1d2fa482d1665683883f80b1f4d87" title="Use dynamic memory allocation.">SACN_DYNAMIC_MEM</a> is 0, <a class="el" href="group__sacnopts__receiver.html#ga079b2f51919b9ac76e3b3330040bd20e" title="The maximum number of sources that can be tracked on each universe.">SACN_RECEIVER_MAX_SOURCES_PER_UNIVERSE</a> will be the limit. Otherwise, if <a class="el" href="group__sacnopts__global.html#gaf7b1d2fa482d1665683883f80b1f4d87" title="Use dynamic memory allocation.">SACN_DYNAMIC_MEM</a> is 1, the library will track as many sources as it is able to dynamically allocate memory for, and this callback will not be called in normal program operation (and can be set to NULL in the config struct in C).</p>
<p> 
<div class="code-tab-selector">
  <button id="button_9_c" class="code-tab-links" onclick="selectLanguage(event, '9', 'c')">C</button>
  <button id="button_9_cpp" class="code-tab-links" onclick="selectLanguage(event, '9', 'cpp')">C++</button>
</div>
<div id="div_9_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_source_limit_exceeded_callback(<a class="code" href="group__sacn__receiver.html#gafc1e3c92911f567bed81bbd04f3f34f6">sacn_receiver_t</a> handle, uint16_t universe, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handle and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Handle the condition in an application-defined way. Maybe log it?</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
<div id="div_9_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyNotifyHandler::HandleSourceLimitExceeded(Handle handle, uint16_t universe)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Handle the condition in an application-defined way. Maybe log it?</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> 
</div>
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting Started with sACN</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
